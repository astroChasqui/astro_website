<?php
ob_start();
session_start();
?>

<!DOCTYPE html>

<html>

<head>
  <title>Ivan Ramirez - Tools</title>
  <link rel="stylesheet" type="text/css" href="css/main.css">
  <script src="js/functions.js"></script>
</head>

<body id="body_tools">
  <div id="container">
    <?php include "header.html"?>
    <div id="content">

      <p align="right">Click on the headers for info.</p>

      <?php
        include "php/tools.php";
        if ($errMsg != "") echo "<strong>$errMsg</strong>";
      ?>

      <h3 id="ct_info_switch" onclick="showInfo('ct_info');">
          + Color-T<sub>eff</sub>
      </h3>
        <p id="ct_info" class="tools_info" hidden>
          Uses Casagrande et al. (2010, A&A, 512, 54) color calibrations to calculate effective temperatures of dwarf and subgiant stars.
        </p>
        <form method="post">
          <select name='color'>
            <?php
              $colors = array("B-V", "b-y", "V-Ks", "BT-VT", "VT-Ks");
              foreach ($colors as $acolor) {
                if ($acolor == $color) $sel="selected"; else $sel="";
                echo "<option $sel>$acolor</option>";
              }
            ?>
          </select>
          = <input type="text" name="color_value"
                 maxlength="5" style="width: 50px;"
                 value="<?php echo $color_value;?>">
          [Fe/H] =
          <input type="text" name="feh_ct"
                 maxlength="5" style="width: 50px;"
                 value="<?php echo $feh_ct;?>">
          <input type="submit" name="color_teff" value="Submit" >
          T<sub>eff</sub> =
          <input type="text" name="color_teff_value" disabled
                 style="width: 45px; color: green;" maxlength="4" 
                 value="<?php echo $color_teff_value;?>">
        </form>

    <h3 id="mag_info_switch" onclick="showInfo('mag_info');">
        + Model Atmosphere Generator
    </h3>
      <p id="mag_info" class="tools_info" hidden>
        Generates an input model atmosphere for MOOG. If not found in the grid, linear interpolation is performed. Kurucz and MARCS models are available. The output file is in MOOG's KURUCZ format.
      </p>
      <form method="post">
        T<sub>eff</sub> =
        <input type="text" name="teff_mag" style="width: 45px;" maxlength="4"
               value="<?php echo $teff_mag;?>">
        log g =
        <input type="text" name="logg_mag" style="width: 45px;" maxlength="4"
                value="<?php echo $logg_mag;?>">
        [Fe/H] =
        <input type="text" name="feh_mag" style="width: 50px;" maxlength="5"
               value="<?php echo $feh_mag;?>">
        vt =
        <input type="text" name="vt_mag" style="width: 45px;" maxlength="4"
               value="<?php echo $vt_mag;?>">
        <br />
        Grid:
        <select name="grid_mag">
          <?php
            $grids = array("odfnew", "aodfnew", "over", "nover", "marcs");
            foreach ($grids as $agrid) {
              if ($agrid == $grid_mag) $sel="selected"; else $sel="";
              echo "<option $sel>$agrid</option>";
            }
        ?>
        </select>
        <input type="submit" name="model_atmosphere_generator" value="Submit">
      </form>

    <h3 id="nlte_info_switch" onclick="showInfo('nlte_info');">
        + Non-LTE corrections for the 777 nm O I lines
    </h3>
      <p id="nlte_info" class="tools_info" hidden>
        Uses Ramirez et al. (2007) grid to calculate non-LTE corrections to the oxygen abundances, A(O), inferred from the 777 nm O I lines.
      </p>
      <form method="post">
          T<sub>eff</sub> =
          <input type="text" name="teff_nlte" maxlength="4"
                 style="width: 45px;" value='<?php echo $teff_nlte;?>'>
          log g =
          <input type="text" name="logg_nlte" maxlength="4"
                 style="width: 45px;" value='<?php echo $logg_nlte;?>'>
          [Fe/H] =
          <input type="text" name="feh_nlte" maxlength="5"
                 style="width: 50px;" value='<?php echo $feh_nlte;?>'>
          <br />
          A(O) = <input type="text" name="ao1" value='<?php echo $ao1;?>'
                        style="width: 45px;" maxlength="4">
                 <input type="text" name="ao2" value='<?php echo $ao2;?>'
                        style="width: 45px;" maxlength="4">
                 <input type="text" name="ao3" value='<?php echo $ao3;?>'
                        style="width: 45px;" maxlength="4">
        <input type="submit" name="nlte" value="Submit" />
        <br />
        Non-LTE corrections =
        <input type="text" name="d1" disabled
               style="width: 50px; color: green;" maxlength="4"
               value='<?php echo $d0;?>'>
        <input type="text" name="d2" disabled
               style="width: 50px; color: green;" maxlength="4"
               value='<?php echo $d1;?>'>
        <input type="text" name="d3" disabled
               style="width: 50px; color: green;" maxlength="4"
               value='<?php echo $d2;?>'>
      </form>

    </div>
    <?php include "footer.html"?>
  </div>
</body>

</html>
